function show_toast(e,t){$("toast").show_inline(),$("toast").innerHTML=e,setTimeout(function(){$("toast").hide(),t&&t()},3e3)}function show_loading(e,t){$("loading").show_inline(),$("loading_text").innerHTML=e}function hide_loading(e,t){$("loading").hide()}var $=function(e){return document.getElementById(e)};String.prototype.len=function(){return this.replace(/[^\x00-\xff]/g,"aa").length},String.prototype.trim=function(){return this.replace(/(^ *)|( *$)/g,"")},String.prototype.htmlencode=function(){return this.replace(/[<>"']+/g,"")},String.prototype.encode=function(){return escape(encodeURIComponent(this))};var badWords=/\u64cd|\u9e21|\u8279|\u5988\u903c|\u65e5\u4f60|\u65e5\u903c|\u9634\u8482|\u9634\u9053|\u9634\u90e8|\u9634\u6bdb|\u9e21\u5df4|\u6cd5\u8f6e\u529f|\u8584\u7199\u6765|fuck|\u4e60\u8fd1\u5e73|\u674e\u514b\u5f3a|\u80e1\u9526\u6d9b|\u6e29\u5bb6\u5b9d|\u6bd2\u54c1|\u516d\u5408\u5f69|\u5bc6\u7801|\u5361\u53f7|\u5e10\u53f7/gi;String.prototype.filter=function(){return this.replace(badWords,"**")},Element.prototype.show=function(){this.style.display="block"},Element.prototype.show_inline=function(){this.style.display="inline-block"},Element.prototype.hide=function(){this.style.display="none"};var $post=function(url,parameters,loadingMessage,functionName){var request=new XMLHttpRequest;loadingMessage!=""&&show_loading(loadingMessage);var method="POST";parameters==""&&(method="GET",parameters=null),request.open(method,url,!0),request.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),request.onreadystatechange=function(){if(request.readyState==4){loadingMessage!=""&&hide_loading();if(request.status==200){if(functionName)try{var json=eval("("+request.responseText+")");eval(functionName+"(json)")}catch(e){}}else loadingMessage!=""&&show_toast("发生意外错误，请稍候再试")}},request.send(parameters)},_cookie={_set:function(e,t,n){if(n){var r=new Date;r.setTime(r.getTime()+n*1e3)}document.cookie=e+"="+encodeURI(t)+(n?";expires="+r.toGMTString():"")+"; path=/"},_get:function(e){var t=document.cookie,n=t.indexOf(e+"=");if(n!=-1){n+=e.length+1;var r=t.indexOf(";",n);return r==-1&&(r=t.length),t.substring(n,r)}return""}}