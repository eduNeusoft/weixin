define("app/weixinV2.1/book/couponForm",["gallery/zepto/1.1.3/zepto","app/weixinV2.1/book/utilities","app/weixinV2.1/book/validator","app/weixinV2.1/book/language"],function(a){var b=a("gallery/zepto/1.1.3/zepto"),c=a("app/weixinV2.1/book/utilities");a("app/weixinV2.1/book/validator");var d=a("app/weixinV2.1/book/language");b(function(){function a(){var a=j.val(),c=k.val(),d=l.val();return""===b.trim(a)||""===b.trim(c)||""===b.trim(d)?!1:b.validator.isValidPhoneNumber(d)&&b.validator.isValidIdNumber(c)?!0:!1}function e(){b.ajax({type:i.attr("method"),url:i.attr("action"),data:i.serialize(),success:function(a){var d=c.getDomBody(a);b.mobileModal.showModal(d),f(),g()},error:function(){}})}function f(){b("a.guan").on("click",function(){return b.mobileModal.hideModal(),!1})}function g(){j.val(""),k.val(""),l.val("")}var h=b("div[data-moduleid='tehui']"),i=h.find(".discount_form");i.on("submit",function(){if(a()){var b=i.find("[type=submit]");b.attr("disable",!0),e()}else c.showErrorMessage(d.invalidCouponFormData);return!1});var j=i.find("#realname"),k=i.find("#identityid"),l=i.find("#mobile")})});